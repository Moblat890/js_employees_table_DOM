{"version":3,"sources":["scripts/main.js"],"names":["previousClick","previousRow","body","document","tbody","querySelector","theadList","children","rows","table","salaryToNumber","sal","slice","split","join","ascSort","el","index","indexOf","target","tagName","sort","a","b","elementA","cells","textContent","elementB","localeCompare","append","descSort","addEventListener","e","row","parentNode","classList","add","remove","insertAdjacentHTML","form","notification","positionTop","positionRight","title","type","description","message","style","top","right","setTimeout","removeChild","ev","preventDefault","elements","name","value","length","age","position","salary","office","parseInt","toLocaleString","reset","input","createElement","previousValue","focus","cellIndex","isNaN","enter","code","blur"],"mappings":"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","file":"main.a6022578.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst body = document.body;\nconst tbody = document.querySelector('tbody');\nconst theadList = [...document.querySelector('thead tr').children];\nlet rows = [...tbody.rows];\nconst table = document.querySelector('table');\n\nfunction salaryToNumber(sal) {\n  return +sal.slice(1).split(',').join('');\n};\n\nlet previousClick;\n\nfunction ascSort(el) {\n  const index = theadList.indexOf(el.target);\n\n  if (el.target.tagName !== 'TH') {\n    return;\n  };\n\n  rows.sort((a, b) => {\n    const elementA = a.cells[index].textContent;\n    const elementB = b.cells[index].textContent;\n\n    if (el.target.textContent === 'Salary') {\n      return salaryToNumber(elementA) - salaryToNumber(elementB);\n    }\n\n    return elementA.localeCompare(elementB);\n  });\n\n  tbody.append(...rows);\n  previousClick = el.target;\n};\n\nfunction descSort(el) {\n  const index = theadList.indexOf(el.target);\n\n  if (el.target.tagName !== 'TH') {\n    return;\n  };\n\n  rows.sort((a, b) => {\n    const elementA = a.cells[index].textContent;\n    const elementB = b.cells[index].textContent;\n\n    if (el.target.textContent === 'Salary') {\n      return salaryToNumber(elementB) - salaryToNumber(elementA);\n    }\n\n    return elementB.localeCompare(elementA);\n  });\n\n  tbody.append(...rows);\n  previousClick = '';\n}\n\ntable.addEventListener('click', e => {\n  if (previousClick !== e.target) {\n    ascSort(e);\n  } else {\n    descSort(e);\n  }\n});\n\nlet previousRow;\n\ntbody.addEventListener('click', e => {\n  const row = e.target.parentNode;\n\n  if (row !== previousRow) {\n    row.classList.add('active');\n\n    if (previousRow) {\n      previousRow.classList.remove('active');\n    }\n    previousRow = row;\n  }\n});\n\nbody.insertAdjacentHTML('beforeend', `\n  <form class=\"new-employee-form\">\n    <label>Name:\n      <input name=\"name\" type=\"text\" data-qa=\"name\">\n    </label>\n    <label>Position:\n      <input name=\"position\" type=\"text\" data-qa=\"position\">\n    </label>\n    <label>Office:\n      <select name=\"office\" data-qa=\"office\">\n        <option>Tokyo</option>\n        <option>Singapore</option>\n        <option>London</option>\n        <option>New York</option>\n        <option>Edinburgh</option>\n        <option>San Francisco</option>\n      </select>\n    </label>\n    <label>Age:\n      <input name=\"age\" type=\"number\" data-qa=\"age\">\n    </label>\n    <label>Salary:\n      <input name=\"salary\" type=\"number\" data-qa=\"salary\">\n    </label>\n\n    <button type\"submit\">\n      Save to table\n    </button>\n  </form>\n`);\n\nconst form = document.querySelector('form');\n\nform.addEventListener('submit', ev => {\n  ev.preventDefault();\n\n  if (form.elements.name.value.length < 4) {\n    notification(110, 10, 'Error', 'error',\n      'Name must contain at least 4 letters');\n\n    return;\n  }\n\n  if (form.elements.age.value < 18 || form.elements.age.value > 90) {\n    notification(210, 10, 'Error',\n      'error', 'Age must be between 18 and 90');\n\n    return;\n  }\n\n  if (form.elements.position.value === ''\n      || form.elements.salary.value === '') {\n    notification(310, 10, 'Missing data',\n      'error', 'Please, fill all fields');\n\n    return;\n  }\n\n  notification(10, 10, 'Success!', 'success',\n    'New employee successfully added');\n\n  tbody.insertAdjacentHTML('beforeend', `\n    <tr>\n      <td>${form.elements.name.value}</td>\n      <td>${form.elements.position.value}</td>\n      <td>${form.elements.office.value}</td>\n      <td>${form.elements.age.value}</td>\n      <td>$${parseInt(+form.elements.salary.value).toLocaleString('en-US')}</td>\n    </tr>\n    `);\n\n  rows = [...tbody.rows];\n  form.reset();\n});\n\nfunction notification(positionTop, positionRight, title, type, description) {\n  body.insertAdjacentHTML('beforeend', `\n  <div class=\"notification ${type}\" data-qa=\"notification\">\n    <h2 class=\"title\">${title}</h2>\n    <p>${description}</p>\n  </div>\n  `);\n\n  const message = document.querySelector('.notification');\n\n  message.style.top = `${positionTop}px`;\n  message.style.right = `${positionRight}px`;\n\n  setTimeout(() => {\n    body.removeChild(document.querySelector('.notification'));\n  }, 3000);\n};\n\ntbody.addEventListener('dblclick', e => {\n  const input = document.createElement('input');\n  const previousValue = e.target.textContent;\n\n  input.classList.add('cell-input');\n  e.target.textContent = '';\n  e.target.append(input);\n  input.focus();\n\n  input.addEventListener('focusout', () => {\n    if (!input.value) {\n      input.value = previousValue;\n    }\n    e.target.textContent = input.value;\n    input.remove();\n\n    if (e.target.cellIndex === 0\n        && e.target.textContent.length < 4) {\n      e.target.textContent = previousValue;\n\n      notification(10, 10, 'Error', 'error',\n        'Name must contain at least 4 letters');\n    }\n\n    if (e.target.cellIndex === 3) {\n      if (isNaN(input.value)) {\n        e.target.textContent = previousValue;\n\n        notification(10, 10, 'Error', 'error',\n          'Age must be a number');\n      };\n\n      if (input.value < 18\n        || input.value > 90) {\n        e.target.textContent = previousValue;\n\n        notification(10, 10, 'Error', 'error',\n          'Age must be between 18 and 90');\n      }\n    }\n\n    if (e.target.cellIndex === 4) {\n      if (!isNaN(input.value)) {\n        e.target.textContent = '$' + parseInt(input.value)\n          .toLocaleString('en-US');\n      } else {\n        e.target.textContent = previousValue;\n\n        notification(10, 10, 'Error', 'error',\n          'Please, enter only numbers without symbols');\n      }\n    }\n  });\n\n  input.addEventListener('keydown', enter => {\n    if (enter.code === 'Enter') {\n      input.blur();\n    };\n  });\n});\n"]}